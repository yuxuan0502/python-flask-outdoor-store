<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœç´¢ç»“æœ - æˆ·å¤–å•†å“å•†åŸ</title>
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='icons/favicon.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='page.css') }}">
    <style>
        /* æœç´¢é¡µé¢ç‰¹æœ‰æ ·å¼ */
        .search-results-container {
            padding: 40px 0;
            min-height: 600px;
        }

        .search-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
        }

        .search-title {
            font-size: 32px;
            color: #333;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .search-subtitle {
            color: #666;
            font-size: 16px;
        }

        .search-keyword {
            color: #667eea;
            font-weight: 600;
            padding: 2px 8px;
            background: #f0f4ff;
            border-radius: 4px;
            margin: 0 5px;
        }

        .search-count {
            color: #ff6b6b;
            font-weight: 700;
        }

        .search-refine {
            margin-top: 30px;
        }

        .search-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .search-sort {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sort-label {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .sort-select {
            padding: 10px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            min-width: 180px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sort-select:focus {
            border-color: #667eea;
            outline: none;
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: #f8f9fa;
            padding: 4px;
            border-radius: 6px;
        }

        .view-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            color: #666;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .view-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .view-btn:hover:not(.active) {
            color: #333;
        }

        /* å•†å“ç½‘æ ¼å¸ƒå±€ */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        /* å•†å“åˆ—è¡¨å¸ƒå±€ */
        .results-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 50px;
        }

        .product-card-grid {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card-grid:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.12);
        }

        .product-card-list {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .product-card-list:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }

        .product-image-grid {
            width: 100%;
            height: 220px;
            object-fit: cover;
        }

        .product-image-list {
            width: 180px;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .product-content-grid {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-content-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .product-title-grid {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-title-list {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            line-height: 1.4;
        }

        .product-card-grid a,
        .product-card-list a,
        .product-card-grid a:hover,
        .product-card-list a:hover {
            text-decoration: none;
            color: inherit;
        }

        .product-description-list {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .product-brand {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .product-price {
            color: #ff6b6b;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .product-meta-grid {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: #999;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .product-meta-list {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }

        .product-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .btn-primary {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-2px);
        }

        .btn-outline {
            padding: 12px 25px;
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-outline:hover {
            background: #f0f4ff;
            transform: translateY(-2px);
        }

        /* ç©ºçŠ¶æ€ */
        .no-results {
            text-align: center;
            padding: 80px 20px;
            color: #666;
        }

        .no-results-icon {
            font-size: 60px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .no-results-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 15px;
        }

        .no-results-text {
            color: #999;
            margin-bottom: 30px;
            max-width: 400px;
            margin: 0 auto 30px;
        }

        .search-suggestions {
            margin-top: 30px;
            text-align: center;
        }

        .suggestions-title {
            font-size: 16px;
            color: #666;
            margin-bottom: 15px;
        }

        .suggestions-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .suggestion-tag {
            padding: 8px 16px;
            background: #f8f9fa;
            color: #667eea;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
        }

        .suggestion-tag:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* ç­›é€‰ä¾§è¾¹æ  */
        .search-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 40px;
        }

        .filter-sidebar {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            height: fit-content;
        }

        .filter-section {
            margin-bottom: 30px;
        }

        .filter-section:last-child {
            margin-bottom: 0;
        }

        .filter-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-checkbox:checked {
            background: #667eea;
            border-color: #667eea;
        }

        .filter-label {
            color: #666;
            font-size: 14px;
            cursor: pointer;
            user-select: none;
            flex: 1;
        }

        .filter-count {
            color: #999;
            font-size: 12px;
        }

        .price-range {
            padding: 15px 0;
        }

        .price-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .price-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            font-size: 14px;
        }

        .price-input:focus {
            border-color: #667eea;
            outline: none;
        }

        .price-slider {
            width: 100%;
            height: 4px;
            background: #e1e5e9;
            border-radius: 2px;
            position: relative;
            margin: 20px 0;
        }

        .price-slider::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 100%;
            background: #667eea;
            border-radius: 2px;
        }

        .apply-filters {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .apply-filters:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            transform: translateY(-2px);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .search-layout {
                grid-template-columns: 1fr;
            }

            .filter-sidebar {
                order: 2;
            }

            .results-container {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .product-card-list {
                flex-direction: column;
                align-items: flex-start;
            }

            .product-image-list {
                width: 100%;
                height: 200px;
            }

            .search-actions {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }

            .search-sort {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 576px) {
            .results-grid {
                grid-template-columns: 1fr;
            }

            .product-actions {
                flex-direction: column;
            }

            .search-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<header class="header">
    <div class="w">
        <a class="logo" href="{{ url_for('user.index') }}">
            <span class="logo-text">Store</span>
        </a>
        <nav class="nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('user.index') }}">é¦–é¡µ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('user.car') }}">è´­ç‰©è½¦</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('user.personal_center') }}">ä¸ªäººä¸­å¿ƒ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('user.about') }}">å…¨éƒ¨å•†å“</a>
                </li>
                <li class="nav-item search-item">
                    <form class="search-form" action="{{ url_for('user.search') }}" method="GET">
                        <input class="search-input-sm" type="text" name="keyword" placeholder="æœç´¢å•†å“..." value="{{ key or request.args.get('keyword', '') }}">
                        <button class="search-btn-sm" type="submit">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </button>
                    </form>
                </li>
                <li class="nav-item">
                    {% if user %}
                    <div class="user-info">
                        <span class="user-name">æ¬¢è¿ï¼Œ{{ user.name }}</span>
                        <a href="{{ url_for('user.logout') }}" class="logout-btn">é€€å‡º</a>
                    </div>
                    {% endif %}
                </li>
            </ul>
        </nav>
    </div>
</header>

<!-- æœç´¢ç»“æœé¡µé¢ -->
<main class="search-results-container">
    <div class="w">
        <!-- æœç´¢å¤´éƒ¨ -->
        <div class="search-header">
    <h1 class="search-title">æœç´¢ç»“æœ</h1>
    <div class="search-subtitle">
        æœç´¢å…³é”®è¯ï¼š<span class="search-keyword">{{ key }}</span>
        å…±æ‰¾åˆ° <span class="search-count">{{ products|length if products else 0 }}</span> ä»¶ç›¸å…³å•†å“
    </div>

    <div class="search-refine">
        <form action="{{ url_for('user.search') }}" method="GET" style="display: flex; gap: 10px; max-width: 600px;" id="mainSearchForm">
            <input type="text" name="keyword" placeholder="è¯·è¾“å…¥æ–°çš„æœç´¢å…³é”®è¯..." value="{{ key if key else '' }}" style="flex: 1; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px;">
            <button type="submit" class="btn-primary" style="padding: 15px 30px;">é‡æ–°æœç´¢</button>

            <!-- éšè—å­—æ®µä¼ é€’ç­›é€‰å‚æ•° -->
            <input type="hidden" name="sort" value="{{ current_sort if current_sort else 'relevance' }}">
            <input type="hidden" name="brand" value="{{ current_brand if current_brand else '' }}">
            <input type="hidden" name="min_price" id="hidden-min-price" value="{{ min_price if min_price else '' }}">
            <input type="hidden" name="max_price" id="hidden-max-price" value="{{ max_price if max_price else '' }}">
        </form>
    </div>
</div>

        {% if products %}
        <div class="search-layout">
            <!-- ç­›é€‰ä¾§è¾¹æ  -->
            <!-- åœ¨ search.html ä¸­ï¼Œå°†åŸæœ‰çš„ç­›é€‰è¡¨å•æ”¹ä¸ºå®é™…å¯ç”¨çš„ -->
            <form action="{{ url_for('user.search') }}" method="GET" style="display: none;" id="searchForm">
                <input type="text" name="keyword" id="form-keyword" value="{{ key }}">
                <input type="text" name="sort" id="form-sort" value="{{ current_sort if current_sort else 'relevance' }}">
                <input type="text" name="price" id="form-price" value="{{ current_price if current_price else '' }}">
                <input type="text" name="brand" id="form-brand" value="{{ current_brand if current_brand else '' }}">
            </form>

            <!-- ç­›é€‰ä¾§è¾¹æ  - æ›´æ–°ä¸ºå®é™…å¯ç”¨çš„è¡¨å• -->
            <!-- ç­›é€‰ä¾§è¾¹æ  -->
            <aside class="filter-sidebar">
    <div class="filter-section">
        <h3 class="filter-title">ä»·æ ¼èŒƒå›´</h3>
        <div class="price-range">
            <div class="price-inputs" style="display: flex; gap: 10px;">
                <input type="number" class="price-input" placeholder="æœ€ä½ä»·" min="0"
                        id="minPrice" value="{{ min_price if min_price else '' }}" style="flex: 1;">
                <input type="number" class="price-input" placeholder="æœ€é«˜ä»·" min="0"
                        id="maxPrice" value="{{ max_price if max_price else '' }}" style="flex: 1;">
            </div>
            <button type="button" class="apply-filters" onclick="applyPriceFilter()">ç­›é€‰ä»·æ ¼</button>
        </div>
    </div>

    <div class="filter-section">
        <h3 class="filter-title">å“ç‰Œ</h3>
        <div class="filter-options" id="brand-filters">
            <!-- åŠ¨æ€ç”Ÿæˆå“ç‰Œé€‰é¡¹ -->
            <div class="filter-option">
                <input type="radio" name="brand" id="brand-all" value=""
                       {% if not current_brand %}checked{% endif %} onchange="applyBrandFilter('')">
                <label class="filter-label" for="brand-all">å…¨éƒ¨å“ç‰Œ</label>
            </div>
            {% for brand in brands %}
            <div class="filter-option">
                <input type="radio" name="brand" id="brand-{{ loop.index }}" value="{{ brand }}"
                       {% if current_brand == brand %}checked{% endif %} onchange="applyBrandFilter('{{ brand }}')">
                <label class="filter-label" for="brand-{{ loop.index }}">
                    {{ brand }}
                </label>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="filter-section">
        <h3 class="filter-title">å•†å“çŠ¶æ€</h3>
        <div class="filter-options">
            <div class="filter-option">
                <input type="checkbox" class="filter-checkbox" id="status1" checked>
                <label class="filter-label" for="status1">æœ‰ç°è´§</label>
            </div>
            <div class="filter-option">
                <input type="checkbox" class="filter-checkbox" id="status2">
                <label class="filter-label" for="status2">çƒ­é”€å•†å“</label>
            </div>
        </div>
    </div>
</aside>

            <!-- æœç´¢ç»“æœ -->
            <div class="results-container">
                <div class="search-actions">
                    <div class="search-sort">
                        <span class="sort-label">æ’åºæ–¹å¼ï¼š</span>
                        <select class="sort-select" id="sortSelect" onchange="sortResults(this.value)">
                            <option value="relevance" {% if current_sort == 'relevance' %}selected{% endif %}>ç›¸å…³åº¦</option>
                            <option value="price_asc" {% if current_sort == 'price_asc' %}selected{% endif %}>ä»·æ ¼ä»ä½åˆ°é«˜</option>
                            <option value="price_desc" {% if current_sort == 'price_desc' %}selected{% endif %}>ä»·æ ¼ä»é«˜åˆ°ä½</option>
                            <option value="sales_desc" {% if current_sort == 'sales_desc' %}selected{% endif %}>é”€é‡ä¼˜å…ˆ</option>
                            <option value="newest" {% if current_sort == 'newest' %}selected{% endif %}>æœ€æ–°ä¸Šæ¶</option>
                        </select>
                    </div>

                    <div class="view-toggle">
                        <button class="view-btn active" onclick="changeView('grid')" id="gridView">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                        </button>
                        <button class="view-btn" onclick="changeView('list')" id="listView">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6"></line>
                                <line x1="8" y1="12" x2="21" y2="12"></line>
                                <line x1="8" y1="18" x2="21" y2="18"></line>
                                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                                <line x1="3" y1="18" x2="3.01" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- ç½‘æ ¼è§†å›¾ï¼ˆé»˜è®¤ï¼‰ -->
                <div class="results-grid" id="gridResults">
                    {% for product in products %}
                    <div class="product-card-grid">
                        <a href="{{ url_for('user.detail', id=product.id) }}">
                            <img src="{{ product.photo }}" alt="{{ product.name }}" class="product-image-grid">
                        </a>
                        <div class="product-content-grid">
                            <h3 class="product-title-grid">{{ product.name }}</h3>
                            <div class="product-brand">å“ç‰Œï¼š{{ product.derive }}</div>
                            <div class="product-price">Â¥{{ product.price }}</div>
                            <div class="product-meta-grid">
                                <span>é”€é‡ï¼š{{ product.sales }}</span>
                                <span>åº“å­˜å……è¶³</span>
                            </div>
                            <div class="product-actions">
                                <a href="{{ url_for('user.detail', id=product.id) }}" class="btn-outline">æŸ¥çœ‹è¯¦æƒ…</a>
                                <a href="{{ url_for('user.add_car', id=product.id) }}" class="btn-primary">åŠ å…¥è´­ç‰©è½¦</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <!-- åˆ—è¡¨è§†å›¾ï¼ˆéšè—ï¼‰ -->
                <div class="results-list" id="listResults" style="display: none;">
                    {% for product in products %}
                    <div class="product-card-list">
                        <a href="{{ url_for('user.detail', id=product.id) }}">
                            <img src="{{ product.photo }}" alt="{{ product.name }}" class="product-image-list">
                        </a>
                        <div class="product-content-list">
                            <h3 class="product-title-list">{{ product.name }}</h3>
                            <p class="product-description-list">è¿™æ˜¯ä¸€æ¬¾ä¼˜è´¨çš„æˆ·å¤–å•†å“ï¼Œä¸“ä¸ºæˆ·å¤–è¿åŠ¨çˆ±å¥½è€…è®¾è®¡ã€‚é‡‡ç”¨é«˜è´¨é‡ææ–™åˆ¶ä½œï¼Œè€ç”¨ä¸”å®ç”¨ï¼Œæ˜¯æ‚¨æˆ·å¤–æ¢é™©çš„ç†æƒ³é€‰æ‹©ã€‚</p>
                            <div class="product-brand">å“ç‰Œï¼š{{ product.derive }}</div>
                            <div class="product-meta-list">
                                <span>ä»·æ ¼ï¼šÂ¥{{ product.price }}</span>
                                <span>é”€é‡ï¼š{{ product.sales }}</span>
                                <span>è¯„åˆ†ï¼š4.8</span>
                            </div>
                            <div class="product-actions">
                                <a href="{{ url_for('user.detail', id=product.id) }}" class="btn-outline">æŸ¥çœ‹è¯¦æƒ…</a>
                                <a href="{{ url_for('user.add_car', id=product.id) }}" class="btn-primary">åŠ å…¥è´­ç‰©è½¦</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <!-- åˆ†é¡µ -->
                {% if products|length > 12 %}
                <div class="pagination-container">
                    <div class="pagination">
                        <a href="#" class="pagination-arrow">&lt;</a>
                        <a href="#" class="current-page">1</a>
                        <a href="#">2</a>
                        <a href="#">3</a>
                        <span class="ellipsis">...</span>
                        <a href="#">5</a>
                        <a href="#" class="pagination-arrow">&gt;</a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        {% else %}
        <!-- æ— ç»“æœ -->
        <div class="no-results">
            <div class="no-results-icon">ğŸ”</div>
            <h2 class="no-results-title">æœªæ‰¾åˆ°ç›¸å…³å•†å“</h2>
            <p class="no-results-text">æŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ä¸"{{ key }}"ç›¸å…³çš„å•†å“ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚</p>

            <div class="search-suggestions">
                <h3 class="suggestions-title">æ‚¨å¯ä»¥å°è¯•æœç´¢ï¼š</h3>
                <div class="suggestions-list">
                    <a href="{{ url_for('user.search') }}?keyword=ç™»å±±åŒ…" class="suggestion-tag">ç™»å±±åŒ…</a>
                    <a href="{{ url_for('user.search') }}?keyword=å¸ç¯·" class="suggestion-tag">å¸ç¯·</a>
                    <a href="{{ url_for('user.search') }}?keyword=ç¡è¢‹" class="suggestion-tag">ç¡è¢‹</a>
                    <a href="{{ url_for('user.search') }}?keyword=å†²é”‹è¡£" class="suggestion-tag">å†²é”‹è¡£</a>
                    <a href="{{ url_for('user.search') }}?keyword=ç™»å±±é‹" class="suggestion-tag">ç™»å±±é‹</a>
                </div>
            </div>

            <div style="margin-top: 40px;">
                <a href="{{ url_for('user.about') }}" class="btn-primary" style="display: inline-block; padding: 15px 40px; font-size: 16px;">
                    æµè§ˆå…¨éƒ¨å•†å“
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</main>

<!-- é¡µè„š -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>å…³äºæˆ‘ä»¬</h3>
            <p>æˆ‘ä»¬è‡´åŠ›äºä¸ºæˆ·å¤–çˆ±å¥½è€…æä¾›æœ€ä¼˜è´¨çš„è£…å¤‡å’ŒæœåŠ¡ï¼Œè®©æ‚¨çš„æˆ·å¤–ä¹‹æ—…æ›´åŠ ç²¾å½©ã€‚</p>
        </div>

        <div class="footer-section">
            <h3>è´­ç‰©æŒ‡å—</h3>
            <ul class="footer-links">
                <li><a href="{{ url_for('user.index') }}">é¦–é¡µ</a></li>
                <li><a href="{{ url_for('user.about') }}">å…¨éƒ¨å•†å“</a></li>
                <li><a href="{{ url_for('user.car') }}">è´­ç‰©è½¦</a></li>
                <li><a href="{{ url_for('user.personal_center') }}">ä¸ªäººä¸­å¿ƒ</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>å”®åæœåŠ¡</h3>
            <ul class="footer-links">
                <li><a href="#">é€€æ¢è´§æ”¿ç­–</a></li>
                <li><a href="#">å”®åä¿éšœ</a></li>
                <li><a href="#">æŠ•è¯‰å»ºè®®</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>è”ç³»æˆ‘ä»¬</h3>
            <p>ç”µè¯ï¼š400-123-4567<br>é‚®ç®±ï¼šservice@outdoor.com<br>å·¥ä½œæ—¶é—´ï¼š9:00-18:00</p>
        </div>
    </div>

    <div class="copyright">
        <p>æˆ·å¤–å•†å“å•†åŸ &copy; 2024 ç‰ˆæƒæ‰€æœ‰</p>
    </div>
</footer>

<script>
    // åº”ç”¨ä»·æ ¼ç­›é€‰
    function applyPriceFilter() {
        const minPrice = document.getElementById('minPrice').value;
        const maxPrice = document.getElementById('maxPrice').value;

        document.getElementById('hidden-min-price').value = minPrice;
        document.getElementById('hidden-max-price').value = maxPrice;
        document.getElementById('mainSearchForm').submit();
    }

    // åº”ç”¨å“ç‰Œç­›é€‰
    function applyBrandFilter(brand) {
        document.querySelector('input[name="brand"]').value = brand;
        document.getElementById('mainSearchForm').submit();
    }

    // æ’åºç»“æœ
    function sortResults(sortValue) {
        document.querySelector('input[name="sort"]').value = sortValue;
        document.getElementById('mainSearchForm').submit();
    }

    // åˆ‡æ¢è§†å›¾æ¨¡å¼
    function changeView(viewType) {
        const gridViewBtn = document.getElementById('gridView');
        const listViewBtn = document.getElementById('listView');
        const gridResults = document.getElementById('gridResults');
        const listResults = document.getElementById('listResults');

        if (viewType === 'grid') {
            gridViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
            gridResults.style.display = 'grid';
            listResults.style.display = 'none';
        } else {
            listViewBtn.classList.add('active');
            gridViewBtn.classList.remove('active');
            gridResults.style.display = 'none';
            listResults.style.display = 'flex';
        }

        // ä¿å­˜ç”¨æˆ·åå¥½
        localStorage.setItem('searchView', viewType);
    }

    // é¡µé¢åŠ è½½æ—¶æ¢å¤è§†å›¾åå¥½
    document.addEventListener('DOMContentLoaded', function() {
        const savedView = localStorage.getItem('searchView') || 'grid';
        changeView(savedView);

        // å¤„ç†æœç´¢è¡¨å•ç©ºå€¼æäº¤
        document.getElementById('mainSearchForm').addEventListener('submit', function(e) {
            const keywordInput = this.querySelector('input[name="keyword"]');
            if (!keywordInput.value.trim()) {
                // ç©ºæœç´¢ï¼Œæ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶
                this.querySelector('input[name="keyword"]').value = '';
                this.querySelector('input[name="sort"]').value = 'relevance';
                this.querySelector('input[name="brand"]').value = '';
                this.querySelector('#hidden-min-price').value = '';
                this.querySelector('#hidden-max-price').value = '';
                return true; // å…è®¸æäº¤ï¼Œæ˜¾ç¤ºæ‰€æœ‰å•†å“
            }
            return true;
        });

        // å¤„ç†å¯¼èˆªæ æœç´¢è¡¨å•
        document.querySelectorAll('.search-form').forEach(form => {
            form.addEventListener('submit', function(e) {
                const keywordInput = this.querySelector('input[name="keyword"]');
                if (!keywordInput.value.trim()) {
                    e.preventDefault();
                    // ç©ºæœç´¢ï¼Œè·³è½¬åˆ°æœç´¢é¡µé¢æ˜¾ç¤ºæ‰€æœ‰å•†å“
                    window.location.href = "{{ url_for('user.search') }}";
                }
            });
        });
    });
</script>
</body>
</html>