<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>后台-用户管理</title>
    <link rel="icon" type="image/png" sizes="16x16" href="../../static/icons/favicon.svg">
    <script src="../../static/jQuery.js"></script>
    <link rel="stylesheet" href="../../static/page.css">
    <link rel="stylesheet" href="../../static/admin/css/nav.css">
    <link rel="stylesheet" href="../../static/admin/css/item.css">
    <link rel="stylesheet" href="../../static/admin/css/user.css">


    <script src="../../static/admin/js/nav.js"></script>

</head>
<body>
<div class="tz_content">
    <!--左侧导航栏 start-->
    <div class="t_left">
        <div class="l_logo"></div>
        <div class="l_nav">
            <ul>
                <li>
                    <a href="{{ url_for('admin.index') }}">
                        <img src="../../static/icons/home(white).svg"
                             style="width: 20px;height:20px;vertical-align: text-bottom;">
                        <span>首页</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin.item_view') }}">
                        <img src="../../static/icons/item_list.svg"
                             style="width: 20px;height:20px;vertical-align: text-bottom;">
                        <span>商品列表</span>
                    </a>
                </li>

                <li>
                    <a href="{{ url_for('admin.order_view') }}">
                        <img src="../../static/icons/order_list.svg"
                             style="width: 20px;height:20px;vertical-align: text-bottom;">
                        <span>订单列表</span>
                    </a>
                </li>
                <li class="active">
                    <a href="{{ url_for('admin.user_view') }}">
                        <img src="../../static/icons/user_list.svg"
                             style="width: 20px;height:20px;vertical-align: text-bottom;">
                        <span>用户列表</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!--左侧导航栏 end-->

    <!--头部导航栏 start-->
    <div class="t_header">
        <!--h_nav start-->
        <div class="h_nav">
            <h2>户外商城后台管理</h2>
        </div>
        <!--end h_nav-->

        <!--h_info start-->
        <div class="h_info">
            <div class="h_user">当前用户：
                {% if admin %}
                <a href="javascript:;" class="logout h_out">
                    {{ admin.name }}
                </a>
                {% endif %}
            </div>
            <div class="h_user">
                <a href="{{ url_for('user.index') }}" class="frontend-btn">
                    返回前台
                </a>
            </div>
        </div>
        <!--end h_info-->

    </div>
    <!--头部导航栏 end -->

    <!--内容区域 start-->
    <div class="t_right">
        <div class="r_location">
            <i></i>
            <p>您当前所在位置：首页 > 用户管理</p>
        </div>

        <div class="items">
        <div class="search">
            <div class="search-actions">
                <a href="javascript:;"><span class="clear-btn">清空搜索</span></a>
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                {% for message in messages %}
                <span class="flash-msg" style="color: #f56c6c;">提示：{{ message }}</span>
                {% endfor %}
                {% endif %}
                {% endwith %}
            </div>
            <div class="search-input-wrapper">
                <input type="text" class="search-ipt" placeholder="输入用户名">
                <img class="search-icon" style="width: 20px;height: 20px;" src="../../static/icons/search.svg">
            </div>
        </div>

        <ul class="list">
            {% for user in users %}
            <li data-user_id="{{ user.id }}" data-name="{{ user.name }}" data-admin="{{ user.admin }}">
                <span class="name">用户名：{{ user.name }}</span>
                <span class="pwd">密码：•••••••</span>
                {% if user.admin == 0 %}
                <span class="admin user-role">身份：普通用户</span>
                {% else %}
                <span class="admin admin-role">身份：管理员</span>
                {% endif %}
                <a href="javascript:;" class="edit-btn">修改</a>
            </li>
            {% endfor %}
        </div>
        <div class="pagination">
            <!-- 左侧箭头 -->
            {% if page.has_prev %}
            <a href="{{ url_for('admin.user_view', page=page.prev_num) }}" class="pagination-arrow" id="prev-page"
               aria-label="Previous Page"><</a>
            {% else %}
            <a href="javascript:;" class="pagination-arrow disabled" aria-label="Previous Page"><</a>
            {% endif %}
            {% for p in page.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if p %}
            {% if p == page.page %}
            <a href="{{ url_for('admin.user_view', page=p) }}" class="current-page">{{ p }}</a>
            {% else %}
            <a href="{{ url_for('admin.user_view', page=p) }}">{{ p }}</a>
            {% endif %}
            {% else %}
            <span class="ellipsis">...</span>
            {% endif %}
            {% endfor %}
            <!-- 右侧箭头 -->
            {% if page.has_next %}
            <a href="{{ url_for('admin.user_view', page=page.next_num) }}" class="pagination-arrow"
               id="next-page" aria-label="Next Page">></a>
            {% else %}
            <a href="javascript:;" class="pagination-arrow disabled"
               aria-label="Next Page">></a>
            {% endif %}
        </div>
    </div>
    <!--内容区域 end-->

</div>

<!--修改用户对话框-->
<div class="mask2" style="display: none">
    <form action="{{ url_for('admin.edit_user', user_id=0) }}" method="post" class="det-user" id="editUserForm">
        <h3 style="margin-bottom: 20px; text-align: center; font-size: 20px; font-weight: 600;">修改用户</h3>
        <input type="text" class="upd_id" name="user_id" id="edit_user_id" style="display: none">
        <div style="margin-bottom: 16px;">
            <label style="display: block; margin-bottom: 8px; color: #606266; font-size: 14px;">用户名</label>
            <input type="text" name="name" id="edit_name" placeholder="修改用户名" style="width: 100%; height: 44px; border: 1px solid #dcdfe6; border-radius: 8px; padding: 0 16px; font-size: 14px;">
        </div>
        <div style="margin-bottom: 16px;">
            <label style="display: block; margin-bottom: 8px; color: #606266; font-size: 14px;">密码</label>
            <input type="text" name="password" id="edit_password" placeholder="留空则不修改密码" style="width: 100%; height: 44px; border: 1px solid #dcdfe6; border-radius: 8px; padding: 0 16px; font-size: 14px;">
        </div>
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; color: #606266; font-size: 14px;">用户身份</label>
            <div style="display: flex; gap: 20px;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="radio" id="radio1" name="admin" value="0" style="width: 18px; height: 18px; cursor: pointer;">
                    <span>普通用户</span>
                </label>
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="radio" id="radio2" name="admin" value="1" style="width: 18px; height: 18px; cursor: pointer;">
                    <span>管理员</span>
                </label>
            </div>
        </div>
        <div style="display: flex; gap: 12px;">
            <button type="submit" class="det-y">确认</button>
            <button type="button" class="det-n">取消</button>
        </div>
    </form>
</div>
<!--修改用户对话框-->

<script src="../../static/admin/js/user.js"></script>
</body>
</html>